@using Alma.Workflows.Activities.Interaction
@using Alma.Workflows.Core.Abstractions
@using Alma.Workflows.Core.Contexts
@using Alma.Workflows.Enums

@if (_activity is null)
{
    <MudAlert Severity="Severity.Error">Erro ao carregar atividade.</MudAlert>
}
else
{
    <MudStack>
        <MudText Typo="Typo.body2"><b>@_activity.Text?.GetValue(ActivityExecutionContext)</b></MudText>
    </MudStack>
}

@code {
    [Parameter]
    public IActivity Activity { get; set; } = default!;

    [Parameter]
    public ActivityExecutionContext ActivityExecutionContext { get; set; } = null!;

    [Parameter]
    public ActivityExecutionStatus? ActivityExecutionStatus { get; set; }

    [Parameter]
    public EventCallback<IActivity> ActivityChanged { get; set; }

    private InstructionActivity _activity;

    protected override void OnParametersSet()
    {
        if (Activity is not InstructionActivity activity)
            throw new ArgumentException("Activity must be of type InstructionActivity");

        _activity = activity;
    }
}
